{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///E:/p1/frontend/pages/index.js"],"sourcesContent":["// pages/index.js\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nexport default function Login() {\r\n  const router = useRouter();\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const handleLogin = async () => {\r\n  try {\r\n    const res = await api.post(\"/auth/login\", {\r\n      username,\r\n      password,\r\n    });\r\n\r\n    // โ ุงูุจูุงูุงุช ููุง ูุฑุฌุนูุง ุงูุจุงู\r\n    const user = res.data;\r\n\r\n    // ุชุฎุฒูู ุงููุณุชุฎุฏู\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n    localStorage.setItem(\"role_id\", user.role_id);\r\n\r\n    toast.success(\"ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ\");\r\n\r\n    router.push(\"/dashboard\");\r\n  } catch (err) {\r\n    toast.error(\r\n      err?.response?.data?.message ||\r\n        \"ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ\"\r\n    );\r\n  }\r\n};\r\n\r\n\r\n//   const handleLogin = async (e) => {\r\n//   e.preventDefault();\r\n\r\n//   if (!username || !password) {\r\n//     alert(\"โ๏ธ ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุจูุงูุงุช ูุงููุฉ\");\r\n//     return;\r\n//   }\r\n\r\n//   try {\r\n//     const res = await fetch(\"http://localhost:5000/api/auth/login\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ username, password }),\r\n//     });\r\n\r\n//     const data = await res.json();\r\n\r\n//     if (!res.ok) {\r\n//       alert(data.message || \"ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู\");\r\n//       return;\r\n//     }\r\n\r\n//     localStorage.setItem(\"pharmacy_token\", data.token);\r\n//     localStorage.setItem(\"pharmacy_user\", JSON.stringify(data.user));\r\n\r\n//     // ุงูุชูุฌูู ุญุณุจ ุงูุฏูุฑ ูู ุงูุจุงู ุงูุฏ\r\n//     const redirectMap = {\r\n//       admin: \"/dashboard\",\r\n//       pharmacist: \"/pharmacist\",\r\n//       cashier: \"/cashier\",\r\n//     };\r\n\r\n//     router.push(redirectMap[data.user.role] || \"/dashboard\");\r\n//   } catch (err) {\r\n//     console.error(err);\r\n//     alert(\"ูุดู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ\");\r\n//   }\r\n// };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  // const handleLogin = (e) => {\r\n  //   e.preventDefault();\r\n\r\n  //   if (!username || !password) {\r\n  //     alert(\"โ๏ธ ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุจูุงูุงุช ูุงููุฉ\");\r\n  //     return;\r\n  //   }\r\n\r\n  //   // ----------------------------\r\n  //   // 1๏ธโฃ ุชุญุฏูุฏ ุงูุฏูุฑ ุชููุงุฆููุง\r\n  //   // ----------------------------\r\n  //   let role = \"admin\";\r\n  //   let redirect = \"/dashboard\";\r\n\r\n  //   const u = username.toLowerCase();\r\n\r\n  //   if (u === \"ph\") {\r\n  //     role = \"pharmacist\";\r\n  //     redirect = \"/pharmacist\";\r\n  //   }\r\n\r\n  //   if (u === \"ca\") {\r\n  //     role = \"cashier\";\r\n  //     redirect = \"/cashier\";\r\n  //   }\r\n\r\n  //   // ----------------------------\r\n  //   // 2๏ธโฃ ุงูุตูุงุญูุงุช ุญุณุจ ุงูุฏูุฑ\r\n  //   // ----------------------------\r\n  //   let permissions = [];\r\n\r\n  //   if (role === \"admin\") {\r\n  //     permissions = [\r\n  //       \"manage_users\",\r\n  //       \"manage_medicines\",\r\n  //       \"add_sale\",\r\n  //       \"view_reports\",\r\n  //       \"view_inventory\",\r\n  //     ];\r\n  //   }\r\n\r\n  //   if (role === \"pharmacist\") {\r\n  //     permissions = [\"manage_medicines\", \"add_sale\", \"view_inventory\"];\r\n  //   }\r\n\r\n  //   if (role === \"cashier\") {\r\n  //     permissions = [\"add_sale\"];\r\n  //   }\r\n\r\n  //   // ----------------------------\r\n  //   // 3๏ธโฃ ุชุฎุฒูู ุจูุงูุงุช ุงููุณุชุฎุฏู\r\n  //   // ----------------------------\r\n  //   const user = {\r\n  //     username,\r\n  //     name: username,\r\n  //     role,\r\n  //     permissions,\r\n  //   };\r\n\r\n  //   localStorage.setItem(\"pharmacy_user\", JSON.stringify(user));\r\n  //   localStorage.setItem(\"pharmacy_token\", \"demo-token\");\r\n\r\n  //   // ----------------------------\r\n  //   // 4๏ธโฃ ุฅุถุงูุฉ ุณุฌู ุฏุฎูู โ ุขุฎุฑ 5 ููุท\r\n  //   // ----------------------------\r\n  //   try {\r\n  //     const raw = localStorage.getItem(\"login_history\") || \"[]\";\r\n  //     const list = JSON.parse(raw);\r\n\r\n  //     list.unshift({\r\n  //       username,\r\n  //       time: new Date().toLocaleString(\"ar-EG\"),\r\n  //       status: \"ูุฌุงุญ\",\r\n  //     });\r\n\r\n  //     localStorage.setItem(\"login_history\", JSON.stringify(list.slice(0, 5)));\r\n  //   } catch (err) {\r\n  //     console.error(\"History error:\", err);\r\n  //   }\r\n\r\n  //   // ----------------------------\r\n  //   // 5๏ธโฃ ุงูุชูุฌูู\r\n  //   // ----------------------------\r\n  //   router.push(redirect);\r\n  // };\r\n\r\n  return (\r\n    <div\r\n      dir=\"rtl\"\r\n      className=\"grid min-h-screen px-4 place-items-center bg-gradient-to-br from-sky-100 to-white\"\r\n    >\r\n      <div className=\"w-full max-w-md p-8 bg-white shadow-lg rounded-2xl\">\r\n        {/* ุงูุดุนุงุฑ */}\r\n        <div className=\"flex flex-col items-center mb-6 text-center\">\r\n          <div className=\"flex items-center justify-center w-16 h-16 mb-3 text-3xl text-white rounded-full shadow-md bg-sky-500\">\r\n            ๐\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-gray-800\">ุตูุฏููุฉ ุงููุนููู</h1>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูููุชุงุจุนุฉ\r\n          </p>\r\n        </div>\r\n\r\n        {/* ุงููููุฐุฌ */}\r\n        <form onSubmit={handleLogin} className=\"space-y-5 text-right\">\r\n          {/* ุงุณู ุงููุณุชุฎุฏู */}\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"ุงุณู ุงููุณุชุฎุฏู\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              className=\"w-full px-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-400 focus:border-sky-400\"\r\n            />\r\n            <span className=\"absolute inset-y-0 flex items-center text-lg text-gray-500 right-3\">\r\n              ๐ค\r\n            </span>\r\n          </div>\r\n\r\n          {/* ูููุฉ ุงููุฑูุฑ */}\r\n          <div className=\"relative\">\r\n            <input\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              placeholder=\"ูููุฉ ุงููุฑูุฑ\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              className=\"w-full px-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-400 focus:border-sky-400\"\r\n            />\r\n            <span className=\"absolute inset-y-0 flex items-center text-lg text-gray-500 right-3\">\r\n              ๐\r\n            </span>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowPassword((v) => !v)}\r\n              className=\"absolute inset-y-0 flex items-center text-gray-500 left-3 hover:text-gray-700\"\r\n            >\r\n              {showPassword ? \"๐\" : \"๐๏ธ\"}\r\n            </button>\r\n          </div>\r\n\r\n          {/* ุฒุฑ ุงูุฏุฎูู */}\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full py-2.5 text-white bg-sky-600 hover:bg-sky-700 rounded-md shadow-md transition\"\r\n          >\r\n            ุชุณุฌูู ุงูุฏุฎูู\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"mt-6 text-xs text-center text-gray-400\">\r\n          ยฉ 2025 ุฌููุน ุงูุญููู ูุญููุธุฉ โ ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุฏููุฉ\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}