{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///E:/pharmacy-system-v2/frontend/pages/index.js"],"sourcesContent":["// pages/index.js\nimport { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nexport default function Login() {\n  const router = useRouter();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleLogin = async (e) => {\n  e.preventDefault();\n\n  if (!username || !password) {\n    alert(\"โ๏ธ ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุจูุงูุงุช ูุงููุฉ\");\n    return;\n  }\n\n  try {\n    const res = await fetch(\"http://localhost:5000/api/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ username, password }),\n    });\n\n    const data = await res.json();\n\n    if (!res.ok) {\n      alert(data.message || \"ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู\");\n      return;\n    }\n\n    localStorage.setItem(\"pharmacy_token\", data.token);\n    localStorage.setItem(\"pharmacy_user\", JSON.stringify(data.user));\n\n    // ุงูุชูุฌูู ุญุณุจ ุงูุฏูุฑ ูู ุงูุจุงู ุงูุฏ\n    const redirectMap = {\n      admin: \"/dashboard\",\n      pharmacist: \"/pharmacist\",\n      cashier: \"/cashier\",\n    };\n\n    router.push(redirectMap[data.user.role] || \"/dashboard\");\n  } catch (err) {\n    console.error(err);\n    alert(\"ูุดู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ\");\n  }\n};\n\n\n  // const handleLogin = (e) => {\n  //   e.preventDefault();\n\n  //   if (!username || !password) {\n  //     alert(\"โ๏ธ ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุจูุงูุงุช ูุงููุฉ\");\n  //     return;\n  //   }\n\n  //   // ----------------------------\n  //   // 1๏ธโฃ ุชุญุฏูุฏ ุงูุฏูุฑ ุชููุงุฆููุง\n  //   // ----------------------------\n  //   let role = \"admin\";\n  //   let redirect = \"/dashboard\";\n\n  //   const u = username.toLowerCase();\n\n  //   if (u === \"ph\") {\n  //     role = \"pharmacist\";\n  //     redirect = \"/pharmacist\";\n  //   }\n\n  //   if (u === \"ca\") {\n  //     role = \"cashier\";\n  //     redirect = \"/cashier\";\n  //   }\n\n  //   // ----------------------------\n  //   // 2๏ธโฃ ุงูุตูุงุญูุงุช ุญุณุจ ุงูุฏูุฑ\n  //   // ----------------------------\n  //   let permissions = [];\n\n  //   if (role === \"admin\") {\n  //     permissions = [\n  //       \"manage_users\",\n  //       \"manage_medicines\",\n  //       \"add_sale\",\n  //       \"view_reports\",\n  //       \"view_inventory\",\n  //     ];\n  //   }\n\n  //   if (role === \"pharmacist\") {\n  //     permissions = [\"manage_medicines\", \"add_sale\", \"view_inventory\"];\n  //   }\n\n  //   if (role === \"cashier\") {\n  //     permissions = [\"add_sale\"];\n  //   }\n\n  //   // ----------------------------\n  //   // 3๏ธโฃ ุชุฎุฒูู ุจูุงูุงุช ุงููุณุชุฎุฏู\n  //   // ----------------------------\n  //   const user = {\n  //     username,\n  //     name: username,\n  //     role,\n  //     permissions,\n  //   };\n\n  //   localStorage.setItem(\"pharmacy_user\", JSON.stringify(user));\n  //   localStorage.setItem(\"pharmacy_token\", \"demo-token\");\n\n  //   // ----------------------------\n  //   // 4๏ธโฃ ุฅุถุงูุฉ ุณุฌู ุฏุฎูู โ ุขุฎุฑ 5 ููุท\n  //   // ----------------------------\n  //   try {\n  //     const raw = localStorage.getItem(\"login_history\") || \"[]\";\n  //     const list = JSON.parse(raw);\n\n  //     list.unshift({\n  //       username,\n  //       time: new Date().toLocaleString(\"ar-EG\"),\n  //       status: \"ูุฌุงุญ\",\n  //     });\n\n  //     localStorage.setItem(\"login_history\", JSON.stringify(list.slice(0, 5)));\n  //   } catch (err) {\n  //     console.error(\"History error:\", err);\n  //   }\n\n  //   // ----------------------------\n  //   // 5๏ธโฃ ุงูุชูุฌูู\n  //   // ----------------------------\n  //   router.push(redirect);\n  // };\n\n  return (\n    <div\n      dir=\"rtl\"\n      className=\"grid min-h-screen px-4 place-items-center bg-gradient-to-br from-sky-100 to-white\"\n    >\n      <div className=\"w-full max-w-md p-8 bg-white shadow-lg rounded-2xl\">\n        {/* ุงูุดุนุงุฑ */}\n        <div className=\"flex flex-col items-center mb-6 text-center\">\n          <div className=\"flex items-center justify-center w-16 h-16 mb-3 text-3xl text-white rounded-full shadow-md bg-sky-500\">\n            ๐\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-800\">ุตูุฏููุฉ ุงููุนููู</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูููุชุงุจุนุฉ\n          </p>\n        </div>\n\n        {/* ุงููููุฐุฌ */}\n        <form onSubmit={handleLogin} className=\"space-y-5 text-right\">\n          {/* ุงุณู ุงููุณุชุฎุฏู */}\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              placeholder=\"ุงุณู ุงููุณุชุฎุฏู\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              className=\"w-full px-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-400 focus:border-sky-400\"\n            />\n            <span className=\"absolute inset-y-0 flex items-center text-lg text-gray-500 right-3\">\n              ๐ค\n            </span>\n          </div>\n\n          {/* ูููุฉ ุงููุฑูุฑ */}\n          <div className=\"relative\">\n            <input\n              type={showPassword ? \"text\" : \"password\"}\n              placeholder=\"ูููุฉ ุงููุฑูุฑ\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-sky-400 focus:border-sky-400\"\n            />\n            <span className=\"absolute inset-y-0 flex items-center text-lg text-gray-500 right-3\">\n              ๐\n            </span>\n\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword((v) => !v)}\n              className=\"absolute inset-y-0 flex items-center text-gray-500 left-3 hover:text-gray-700\"\n            >\n              {showPassword ? \"๐\" : \"๐๏ธ\"}\n            </button>\n          </div>\n\n          {/* ุฒุฑ ุงูุฏุฎูู */}\n          <button\n            type=\"submit\"\n            className=\"w-full py-2.5 text-white bg-sky-600 hover:bg-sky-700 rounded-md shadow-md transition\"\n          >\n            ุชุณุฌูู ุงูุฏุฎูู\n          </button>\n        </form>\n\n        <p className=\"mt-6 text-xs text-center text-gray-400\">\n          ยฉ 2025 ุฌููุน ุงูุญููู ูุญููุธุฉ โ ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุฏููุฉ\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}